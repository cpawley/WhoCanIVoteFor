{% extends "base.html" %}

{% block page_title %}UK Elections{% endblock page_title %}
{% block og_title %}UK Elections{% endblock og_title %}
{% block og_description %}All Elections in the UK{% endblock og_description %}

{% block content %}

    {% include 'elections/includes/_elections_breadcrumbs.html' %}

    <aside class="ds-filter" aria-labelledby="filter-label">
        <div class="ds-filter-cluster" id="election-filers">
            <ul aria-labelledby="adv-filter-label-3">
                <li id="adv-filter-label-3" class="ds-filter-label" aria-hidden="true">Election type:</li>
                <li class="btn"><a href="?all" onclick=filterSelection('all') aria-current="true">All</a></li>
                <li class="btn"><a href="?gla" onclick=filterSelection('gla') >Greater London Assembly</a></li>
                <li class="btn"><a href="?local" onclick=filterSelection('local')>Local</a></li>
                <li class="btn"><a id="?parl" href="?parl" onclick=filterSelection('local')>UK Parliament</a></li>
                <li class="btn"><a href="?pcc" onclick=filterSelection('pcc')>Police &amp; Crime Commissioner</a></li>
                <li class="btn"><a href="?scottish" onclick=filterSelection('scottish')>Scottish parliament</a></li>
                <li class="btn"><a href="?senedd" onclick=filterSelection('senedd')>Senedd Cymru</a></li>
            </ul>
        </div>
    </aside>

    <div class="ds-stack-smaller">
        <div class="ds-card">
            <div class="ds-card-body">
                <h1>All Elections</h1>
                <h2>Current Elections</h2>
                <p>This is a list of upcoming elections, and all elections Democracy Club has covered since 2010. The local
                    election database was founded in 2016.</p>
                {% include "elections/includes/_election_list.html" with elections=current_or_future_elections %}


                <h2>Past Elections</h2>
                {% include "elections/includes/_election_list.html" with elections=past_elections %}
            </div>
        </div>

        {% include "elections/includes/_postcode_search_form.html" %}

        {% include "feedback/feedback_form.html" %}
    </div>

{% endblock content %}

<script>
    filterSelection("parl")
    function filterSelection(c) {
        debugger
        var x, i;
        x = document.getElementsByClassName("filterDiv");
        if (c == "all") c = "";
        for (i = 0; i < x.length; i++) {
            RemoveClass(x[i], "show");
            if (x[i].className.indexOf(c) > -1) w3AddClass(x[i], "show");
        }
    }

    function AddClass(element, name) {
        var i, arr1, arr2;
        arr1 = element.className.split(" ");
        arr2 = name.split(" ");
        for (i = 0; i < arr2.length; i++) {
            if (arr1.indexOf(arr2[i]) == -1) {element.className += " " + arr2[i];}
        }
    }

    function RemoveClass(element, name) {
        var i, arr1, arr2;
        arr1 = element.className.split(" ");
        arr2 = name.split(" ");
        for (i = 0; i < arr2.length; i++) {
            while (arr1.indexOf(arr2[i]) > -1) {
                arr1.splice(arr1.indexOf(arr2[i]), 1);
            }
        }
        element.className = arr1.join(" ");
    }

    // Add active class to the current button (highlight it)
    var btnContainer = document.getElementById("election-filters");
    var btns = btnContainer.getElementsByClassName("btn");
    for (var i = 0; i < btns.length; i++) {
        btns[i].addEventListener("click", function(){
            var current = document.getElementsByClassName("active");
            current[0].className = current[0].className.replace(" active", "");
            this.className += " active";
        });
    }

</script>
#election-filers > ul > li:nth-child(3) > a
